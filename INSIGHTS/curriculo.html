<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processar Documento</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <style>
        body {
            padding: 20px;
        }

        .container {
            max-width: 800px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Processar Documento de Currículo</h1>
        <form id="uploadForm">
            <div class="form-group">
                <label for="fileInput">URL do Documento:</label>
                <input type="text" class="form-control" id="fileInput" placeholder="Insira a URL do documento" required>
            </div>
            <button type="submit" class="btn btn-primary">Enviar</button>
        </form>

        <hr>

        <h2>Resultados</h2>
        <div id="results">
            <p id="loadingMessage">Aguardando envio...</p>
        </div>
    </div>

    <script>
        document.getElementById('uploadForm').addEventListener('submit', function (event) {
            event.preventDefault();

            const url = document.getElementById('fileInput').value;
            if (!url) {
                alert('Por favor, insira a URL do documento.');
                return;
            }

            document.getElementById('loadingMessage').innerText = 'Processando...';

            fetch('https://resume-parsing-api2.p.rapidapi.com/processDocument', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-rapidapi-host': 'resume-parsing-api2.p.rapidapi.com',
                    'x-rapidapi-key': 'ea8f2cf512msh9fd1edcfe085f26p12c4b4jsna8e74992509e'
                },
                body: JSON.stringify({
                    extractionDetails: {
                        name: 'Resume - Extraction',
                        language: 'English',
                        fields: [
                            { key: 'personal_info', description: 'personal information of the person', type: 'object', properties: [{ key: 'name', description: 'name of the person', type: 'string' }, { key: 'email', description: 'email of the person', type: 'string' }, { key: 'phone', description: 'phone of the person', type: 'string' }, { key: 'address', description: 'address of the person', type: 'string' }] },
                            { key: 'work_experience', description: 'work experience of the person', type: 'array', items: { type: 'object', properties: [{ key: 'title', description: 'title of the job', type: 'string' }, { key: 'start_date', description: 'start date of the job', type: 'string' }, { key: 'end_date', description: 'end date of the job', type: 'string' }, { key: 'company', description: 'company of the job', type: 'string' }, { key: 'location', description: 'location of the job', type: 'string' }, { key: 'description', description: 'description of the job', type: 'string' }] } },
                            { key: 'education', description: 'school education of the person', type: 'array', items: { type: 'object', properties: [{ key: 'title', description: 'title of the education', type: 'string' }, { key: 'start_date', description: 'start date of the education', type: 'string' }, { key: 'end_date', description: 'end date of the education', type: 'string' }, { key: 'institute', description: 'institute of the education', type: 'string' }, { key: 'location', description: 'location of the education', type: 'string' }, { key: 'description', description: 'description of the education', type: 'string' }] } },
                            { key: 'languages', description: 'languages spoken by the person', type: 'array', items: { type: 'string' } },
                            { key: 'skills', description: 'skills of the person', type: 'array', items: { type: 'string' } },
                            { key: 'certificates', description: 'certificates of the person', type: 'array', items: { type: 'string' } }
                        ]
                    },
                    file: url
                })
            })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('loadingMessage').innerText = '';

                    const resultsDiv = document.getElementById('results');
                    resultsDiv.innerHTML = `<h3>Informações Pessoais</h3>
                                        <p><strong>Nome:</strong> ${data.personal_info.name}</p>
                                        <p><strong>Email:</strong> ${data.personal_info.email}</p>
                                        <p><strong>Telefone:</strong> ${data.personal_info.phone}</p>
                                        <p><strong>Endereço:</strong> ${data.personal_info.address}</p>
                                        <h3>Experiência de Trabalho</h3>`;

                    data.work_experience.forEach((job, index) => {
                        resultsDiv.innerHTML += `<h4>Experiência ${index + 1}</h4>
                                              <p><strong>Título:</strong> ${job.title}</p>
                                              <p><strong>Início:</strong> ${job.start_date}</p>
                                              <p><strong>Fim:</strong> ${job.end_date}</p>
                                              <p><strong>Empresa:</strong> ${job.company}</p>
                                              <p><strong>Localização:</strong> ${job.location}</p>
                                              <p><strong>Descrição:</strong> ${job.description}</p>`;
                    });

                    resultsDiv.innerHTML += `<h3>Educação</h3>`;

                    data.education.forEach((edu, index) => {
                        resultsDiv.innerHTML += `<h4>Educação ${index + 1}</h4>
                                              <p><strong>Título:</strong> ${edu.title}</p>
                                              <p><strong>Início:</strong> ${edu.start_date}</p>
                                              <p><strong>Fim:</strong> ${edu.end_date}</p>
                                              <p><strong>Instituto:</strong> ${edu.institute}</p>
                                              <p><strong>Localização:</strong> ${edu.location}</p>
                                              <p><strong>Descrição:</strong> ${edu.description}</p>`;
                    });

                    resultsDiv.innerHTML += `<h3>Idiomas</h3><p>${data.languages.join(', ')}</p>
                                         <h3>Habilidades</h3><p>${data.skills.join(', ')}</p>
                                         <h3>Certificados</h3><p>${data.certificates.join(', ')}</p>`;
                })
                .catch(error => {
                    document.getElementById('loadingMessage').innerText = 'Erro ao processar o documento.';
                    console.error('Erro:', error);
                });
        });
    </script>
</body>

</html>